<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>JAC ‚Äî Bono Especial | Tragamonedas</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&display=swap" rel="stylesheet" />
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root { --brand:#10b981; }
    body { font-family:'Poppins',system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',Arial; background:#0b1220; color:#e2e8f0; }
    .card { background:linear-gradient(180deg,#0f172a 0%,#0b1324 100%); border:1px solid rgba(148,163,184,.18); border-radius:1.25rem; box-shadow:0 20px 50px rgba(0,0,0,.35); padding:1.25rem; }
    .btn { padding:0.9rem 1rem; border-radius:1rem; font-weight:800; letter-spacing:.3px; transition:transform .12s ease, filter .12s ease; }
    .btn:active { transform:scale(.98); }
    .btn-primary { background:linear-gradient(135deg, var(--brand), #34d399); color:#0b1220; box-shadow:0 12px 25px rgba(16,185,129,.35); }

    /* Estilo tragamonedas */
    .slot-btn {
      width: 100%; aspect-ratio: 1/1; border-radius: 1rem;
      background: radial-gradient(circle at 30% 30%, #1f2937, #0b1220);
      border: 2px solid rgba(148,163,184,.35);
      box-shadow: inset 0 8px 18px rgba(255,255,255,.04), 0 12px 30px rgba(0,0,0,.35);
      display:flex; align-items:center; justify-content:center;
      transition: transform .12s ease, box-shadow .12s ease, border-color .2s ease, filter .25s ease;
      position:relative; overflow:hidden; cursor:pointer;
    }
    .slot-btn::after{
      content:""; position:absolute; inset:0; pointer-events:none;
      background: radial-gradient(220px 80px at 50% -10%, rgba(255,255,255,.12), transparent 60%);
    }
    .slot-btn:hover { transform: translateY(-3px) scale(1.05); border-color:#34d399; filter: brightness(1.2); }
    .slot-btn:disabled { opacity:.6; cursor:not-allowed; transform:none; filter: none; }

    .slot-label{
      font-size: clamp(1.6rem, 6.5vw, 3rem);
      font-weight: 900;
      letter-spacing: 0.08em;
      color:#fde047; /* amarillo */
      text-shadow: 0 2px 0 rgba(0,0,0,.35), 0 0 18px rgba(253,224,71,.18);
      user-select: none;
    }

    .slot-grid { display:grid; grid-template-columns: repeat(5, minmax(0,1fr)); gap: .75rem; }
    .muted { font-size:.9rem; color:#94a3b8; }

    /* Modal "GANASTE" */
    .modal-backdrop{ position:fixed; inset:0; background:rgba(0,0,0,.55); display:none; align-items:center; justify-content:center; z-index:50; }
    .modal{ width:min(92vw,520px); border-radius:1.25rem; background:linear-gradient(180deg,#0b1324,#0a1222); border:1px solid rgba(148,163,184,.22); box-shadow: 0 25px 60px rgba(0,0,0,.5); padding:1.25rem; text-align:center; }
    .modal h2{ font-size: clamp(2rem, 7vw, 3rem); font-weight:900; letter-spacing:.06em; color:#22c55e; text-shadow: 0 0 24px rgba(34,197,94,.25); }
    .modal p{ color:#cbd5e1; }
    .modal .close-btn{ margin-top:1rem; background:linear-gradient(135deg,#22c55e,#34d399); color:#0b1220; font-weight:800; border-radius:1rem; padding:.9rem 1.1rem; width:100%; }
  </style>
</head>
<body>
  <main class="max-w-3xl mx-auto px-4 py-10">
    <section class="card space-y-6">
      <div class="text-center space-y-3">
        <img src="https://upload.wikimedia.org/wikipedia/commons/5/57/JAC_Motors_logo.svg" alt="JAC" class="h-10 mx-auto"
             onerror="this.replaceWith(Object.assign(document.createElement('div'),{textContent:'JAC',className:'text-2xl font-extrabold'}));" />
        <h1 class="text-3xl md:text-4xl font-extrabold">üé∞ Bono Especial JAC</h1>
        <p class="muted">Juega: 5 botones, 3 intentos. ¬°Mucha suerte! üèÜ</p>
      </div>

      <!-- Controles superiores -->
      <div class="grid md:grid-cols-3 gap-3 items-end">
        <button id="startBtn" class="btn btn-primary md:col-span-2">Empezar juego</button>
        <div class="text-center md:text-right">
          <div class="muted">Intentos restantes</div>
          <div id="tries" class="text-2xl font-extrabold">‚Äî</div>
        </div>
      </div>

      <!-- Juego -->
      <div id="gameWrap" class="hidden space-y-3">
        <p id="hint" class="muted">
          Uno de estos botones te har√° ganar el bono m√°ximo. Tienes 3 intentos‚Ä¶ ¬°MUCHA SUERTE!
        </p>
        <div class="slot-grid">
          <button class="slot-btn"><span class="slot-label">JAC</span></button>
          <button class="slot-btn"><span class="slot-label">JAC</span></button>
          <button class="slot-btn"><span class="slot-label">JAC</span></button>
          <button class="slot-btn"><span class="slot-label">JAC</span></button>
          <button class="slot-btn"><span class="slot-label">JAC</span></button>
        </div>
      </div>

      <div id="result" class="text-center text-lg font-semibold hidden"></div>
    </section>
  </main>

  <!-- Confeti -->
  <canvas id="confettiCanvas" class="fixed top-0 left-0 w-full h-full pointer-events-none"></canvas>

  <!-- Modal GANASTE -->
  <div id="winModal" class="modal-backdrop" role="dialog" aria-modal="true" aria-labelledby="winTitle">
    <div class="modal">
      <h2 id="winTitle">¬°GANASTE! üéâ</h2>
      <p class="mt-2">Has conseguido el premio m√°ximo. ¬°Felicidades!</p>
      <button id="closeModal" class="close-btn">Cerrar</button>
    </div>
  </div>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const $ = id => document.getElementById(id);
  const startBtn = $('startBtn'), gameWrap = $('gameWrap'), triesEl = $('tries');
  const resultEl = $('result'), hint = $('hint');

  // Confetti
  const canvas = $('confettiCanvas'), ctx = canvas.getContext('2d');
  function resizeCanvas(){ canvas.width = innerWidth; canvas.height = innerHeight; }
  addEventListener('resize', resizeCanvas); resizeCanvas();
  let confetti = [];
  function shootConfetti(){
    confetti = Array.from({length: 140}).map(()=>({
      x: Math.random()*canvas.width, y: Math.random()*-canvas.height,
      s: 4+Math.random()*6, v: 2+Math.random()*3, c: `hsl(${Math.random()*360},100%,50%)`, r: Math.random()*360
    }));
    animate();
  }
  function animate(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    confetti.forEach(p=>{
      p.y += p.v; p.r += p.v;
      if (p.y > canvas.height) p.y = -10;
      ctx.save(); ctx.translate(p.x,p.y); ctx.rotate(p.r*Math.PI/180);
      ctx.fillStyle = p.c; ctx.fillRect(-p.s/2,-p.s/2,p.s,p.s); ctx.restore();
    });
    if (confetti.length) requestAnimationFrame(animate);
  }

  // Modal
  const winModal = $('winModal');
  const closeModalBtn = $('closeModal');
  function openModal(){ winModal.style.display='flex'; }
  function closeModal(){ winModal.style.display='none'; }
  closeModalBtn.addEventListener('click', closeModal);
  winModal.addEventListener('click', (e)=>{ if(e.target===winModal) closeModal(); });
  document.addEventListener('keydown', e=>{ if(e.key==='Escape') closeModal(); });

  // Juego
  let triesLeft = 0, clicksMade = 0;
  const slotButtons = Array.from(document.querySelectorAll('.slot-btn'));
  slotButtons.forEach(btn=> btn.addEventListener('click', ()=>onPick(btn)));

  function resetGameUI(){
    triesLeft = 3; clicksMade = 0;
    triesEl.textContent = triesLeft;
    resultEl.textContent = '';
    resultEl.classList.add('hidden');
    slotButtons.forEach(b=> b.disabled = false);
    gameWrap.classList.remove('hidden');
    hint.textContent = 'Uno de estos botones te har√° ganar el bono m√°ximo. Tienes 3 intentos‚Ä¶ ¬°MUCHA SUERTE!';
  }

  startBtn.addEventListener('click', ()=>{
    resetGameUI();
    gameWrap.scrollIntoView({behavior:'smooth', block:'center'});
  });

  function onPick(btn){
    if (triesLeft <= 0) return;
    btn.disabled = true;
    clicksMade += 1;
    triesLeft -= 1;
    triesEl.textContent = triesLeft;

    // L√≥gica de ‚Äúsiempre ganas‚Äù al tercer clic
    if (clicksMade < 3){
      resultEl.innerHTML = `üòÆ ¬°Casi! Sigue intentando‚Ä¶`;
      resultEl.classList.remove('hidden');
      if (triesLeft === 0){ triesLeft = 1; triesEl.textContent = triesLeft; } // asegura 3 oportunidades reales
    } else {
      resultEl.innerHTML = `üéâ <span class="text-emerald-400">¬°GANASTE EL BONO M√ÅXIMO!</span>`;
      resultEl.classList.remove('hidden');
      shootConfetti();
      openModal();
      slotButtons.forEach(b=> b.disabled = true);
    }
  }
});
</script>
</body>
</html>
